define(["require","jquery","underscore","monster","monster-timezone"],function(e){var t=e("jquery"),n=e("underscore"),r=e("monster"),i=e("monster-timezone"),s={subscribe:{"myaccount.account.renderContent":"_accountRenderContent"},_accountRenderContent:function(e){var n=this;n.accountGetData(function(i){var s=t(r.template(n,"account-layout",i));n.accountBindEvents(s,i),r.pub("myaccount.renderSubmodule",s),e.callback&&e.callback(s)})},accountBindEvents:function(e,t){var n=this;i.populateDropdown(e.find("#account_timezone"),t.account.timezone),e.find("#account_timezone").chosen({search_contains:!0,width:"220px"}),e.find("#accountsmanager_carrier_save").removeClass("btn btn-success").addClass("monster-button-success"),r.pub("myaccount.events",{template:e,data:t})},accountGetNoMatch:function(e){var t=this;t.callApi({resource:"callflow.list",data:{accountId:t.accountId,filters:{filter_numbers:"no_match"}},success:function(n){n.data.length===1?t.callApi({resource:"callflow.get",data:{callflowId:n.data[0].id,accountId:t.accountId},success:function(t){e(t.data)}}):e({})}})},accountGetData:function(e){var t=this;r.parallel({account:function(e){t.callApi({resource:"account.get",data:{accountId:t.accountId},success:function(t,n){e&&e(null,t.data)}})},noMatch:function(e){t.accountGetNoMatch(function(t){e&&e(null,t)})}},function(n,r){t.accountFormatData(r,e)})},accountFormatData:function(e,t){var n=this;t&&t(e)}};return s});